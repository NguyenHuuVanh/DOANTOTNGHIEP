const express = require("express");
const cors = require("cors");
const app = express();

const data = {
  node1: [
    {
      id: "node1",
      temperature: 38.3,
      humidity: 56.6,
      date: "2024-12-01",
      time: "18:57",
    },
    {
      id: "node1",
      temperature: 30.18,
      humidity: 94.31,
      date: "2024-12-01",
      time: "17:11",
    },
    {
      id: "node1",
      temperature: 18.93,
      humidity: 33.56,
      date: "2024-12-06",
      time: "04:42",
    },
    {
      id: "node1",
      temperature: 36.75,
      humidity: 99.1,
      date: "2024-12-08",
      time: "22:56",
    },
    {
      id: "node1",
      temperature: 6.36,
      humidity: 61.2,
      date: "2024-12-01",
      time: "07:32",
    },
    {
      id: "node1",
      temperature: 29.68,
      humidity: 29.77,
      date: "2024-12-04",
      time: "16:40",
    },
    {
      id: "node1",
      temperature: 27.88,
      humidity: 38.25,
      date: "2024-12-03",
      time: "11:26",
    },
    {
      id: "node1",
      temperature: 24.53,
      humidity: 62.57,
      date: "2024-12-09",
      time: "18:24",
    },
    {
      id: "node1",
      temperature: 13.26,
      humidity: 28.59,
      date: "2024-12-10",
      time: "11:00",
    },
    {
      id: "node1",
      temperature: 27.34,
      humidity: 65.17,
      date: "2024-12-10",
      time: "19:01",
    },
    {
      id: "node1",
      temperature: 34.66,
      humidity: 9,
      date: "2024-12-04",
      time: "02:58",
    },
    {
      id: "node1",
      temperature: 8.39,
      humidity: 4.57,
      date: "2024-12-07",
      time: "07:50",
    },
    {
      id: "node1",
      temperature: 27.92,
      humidity: 73.71,
      date: "2024-12-05",
      time: "17:00",
    },
    {
      id: "node1",
      temperature: 25.49,
      humidity: 12.58,
      date: "2024-11-30",
      time: "14:24",
    },
    {
      id: "node1",
      temperature: 12.31,
      humidity: 40.8,
      date: "2024-12-09",
      time: "23:29",
    },
    {
      id: "node1",
      temperature: 32.42,
      humidity: 6.78,
      date: "2024-12-08",
      time: "15:06",
    },
    {
      id: "node1",
      temperature: 36.54,
      humidity: 90.63,
      date: "2024-12-03",
      time: "08:57",
    },
    {
      id: "node1",
      temperature: 32.69,
      humidity: 62.84,
      date: "2024-12-04",
      time: "15:52",
    },
    {
      id: "node1",
      temperature: 8.07,
      humidity: 55.03,
      date: "2024-12-06",
      time: "18:24",
    },
    {
      id: "node1",
      temperature: 9.87,
      humidity: 82.46,
      date: "2024-12-07",
      time: "16:20",
    },
    {
      id: "node1",
      temperature: 36.99,
      humidity: 5.46,
      date: "2024-12-04",
      time: "17:52",
    },
    {
      id: "node1",
      temperature: 37.3,
      humidity: 88.3,
      date: "2024-12-09",
      time: "19:18",
    },
    {
      id: "node1",
      temperature: 22.35,
      humidity: 24.98,
      date: "2024-11-30",
      time: "06:41",
    },
    {
      id: "node1",
      temperature: 28.33,
      humidity: 64.15,
      date: "2024-12-06",
      time: "03:19",
    },
    {
      id: "node1",
      temperature: 32.35,
      humidity: 5.74,
      date: "2024-11-30",
      time: "11:35",
    },
    {
      id: "node1",
      temperature: 26.73,
      humidity: 20.63,
      date: "2024-12-01",
      time: "07:12",
    },
    {
      id: "node1",
      temperature: 10.23,
      humidity: 49.9,
      date: "2024-12-06",
      time: "13:33",
    },
    {
      id: "node1",
      temperature: 12.5,
      humidity: 74.76,
      date: "2024-12-08",
      time: "23:37",
    },
    {
      id: "node1",
      temperature: 18.64,
      humidity: 15.87,
      date: "2024-12-04",
      time: "01:42",
    },
    {
      id: "node1",
      temperature: 11.82,
      humidity: 25,
      date: "2024-12-08",
      time: "17:14",
    },
    {
      id: "node1",
      temperature: 36.87,
      humidity: 21.93,
      date: "2024-12-03",
      time: "21:19",
    },
    {
      id: "node1",
      temperature: 38.7,
      humidity: 66.61,
      date: "2024-12-03",
      time: "12:44",
    },
    {
      id: "node1",
      temperature: 2.39,
      humidity: 92.89,
      date: "2024-12-10",
      time: "12:05",
    },
    {
      id: "node1",
      temperature: 39.12,
      humidity: 8.13,
      date: "2024-12-03",
      time: "12:42",
    },
    {
      id: "node1",
      temperature: 14.48,
      humidity: 58.83,
      date: "2024-11-30",
      time: "13:58",
    },
    {
      id: "node1",
      temperature: 31.09,
      humidity: 67.12,
      date: "2024-12-03",
      time: "10:46",
    },
    {
      id: "node1",
      temperature: 1.84,
      humidity: 65.05,
      date: "2024-12-01",
      time: "15:50",
    },
    {
      id: "node1",
      temperature: 29.05,
      humidity: 90.22,
      date: "2024-12-06",
      time: "22:11",
    },
    {
      id: "node1",
      temperature: 30.74,
      humidity: 43.56,
      date: "2024-12-06",
      time: "23:01",
    },
    {
      id: "node1",
      temperature: 15.06,
      humidity: 19.86,
      date: "2024-11-30",
      time: "23:52",
    },
    {
      id: "node1",
      temperature: 8.92,
      humidity: 14.8,
      date: "2024-12-02",
      time: "04:17",
    },
    {
      id: "node1",
      temperature: 4.21,
      humidity: 78.75,
      date: "2024-12-03",
      time: "04:42",
    },
    {
      id: "node1",
      temperature: 6.2,
      humidity: 26.35,
      date: "2024-12-01",
      time: "16:42",
    },
    {
      id: "node1",
      temperature: 10.75,
      humidity: 22.69,
      date: "2024-12-02",
      time: "14:00",
    },
    {
      id: "node1",
      temperature: 38.9,
      humidity: 46.16,
      date: "2024-12-07",
      time: "01:56",
    },
    {
      id: "node1",
      temperature: 24.47,
      humidity: 77.7,
      date: "2024-12-01",
      time: "06:45",
    },
    {
      id: "node1",
      temperature: 19.35,
      humidity: 73.44,
      date: "2024-12-05",
      time: "07:52",
    },
    {
      id: "node1",
      temperature: 21.2,
      humidity: 64.81,
      date: "2024-12-03",
      time: "23:18",
    },
    {
      id: "node1",
      temperature: 18.71,
      humidity: 30,
      date: "2024-12-10",
      time: "11:23",
    },
    {
      id: "node1",
      temperature: 15.13,
      humidity: 87.57,
      date: "2024-12-10",
      time: "08:52",
    },
  ],
  node2: [
    {
      id: "node2",
      temperature: 3.58,
      humidity: 14.7,
      date: "2024-12-01",
      time: "02:43",
    },
    {
      id: "node2",
      temperature: 10.6,
      humidity: 24.36,
      date: "2024-12-02",
      time: "15:04",
    },
    {
      id: "node2",
      temperature: 33.24,
      humidity: 31.8,
      date: "2024-12-11",
      time: "15:24",
    },
    {
      id: "node2",
      temperature: 16.61,
      humidity: 96.87,
      date: "2024-12-03",
      time: "17:01",
    },
    {
      id: "node2",
      temperature: 35,
      humidity: 65.37,
      date: "2024-12-06",
      time: "00:57",
    },
    {
      id: "node2",
      temperature: 0.47,
      humidity: 60.13,
      date: "2024-12-08",
      time: "23:07",
    },
    {
      id: "node2",
      temperature: 13.35,
      humidity: 49.2,
      date: "2024-12-06",
      time: "10:19",
    },
    {
      id: "node2",
      temperature: 28.95,
      humidity: 64.62,
      date: "2024-12-08",
      time: "23:38",
    },
    {
      id: "node2",
      temperature: 22.82,
      humidity: 27.85,
      date: "2024-12-04",
      time: "09:29",
    },
    {
      id: "node2",
      temperature: 35.41,
      humidity: 55.48,
      date: "2024-12-07",
      time: "04:12",
    },
    {
      id: "node2",
      temperature: 8.36,
      humidity: 85.33,
      date: "2024-12-08",
      time: "22:04",
    },
    {
      id: "node2",
      temperature: 20.95,
      humidity: 82.29,
      date: "2024-11-30",
      time: "15:17",
    },
    {
      id: "node2",
      temperature: 4.02,
      humidity: 77.01,
      date: "2024-11-30",
      time: "18:10",
    },
    {
      id: "node2",
      temperature: 19.19,
      humidity: 92.24,
      date: "2024-12-10",
      time: "11:08",
    },
    {
      id: "node2",
      temperature: 6.35,
      humidity: 7.41,
      date: "2024-12-05",
      time: "20:25",
    },
    {
      id: "node2",
      temperature: 2.15,
      humidity: 75,
      date: "2024-12-03",
      time: "14:39",
    },
    {
      id: "node2",
      temperature: 35.6,
      humidity: 88.16,
      date: "2024-12-07",
      time: "21:33",
    },
    {
      id: "node2",
      temperature: 25.13,
      humidity: 23.96,
      date: "2024-12-09",
      time: "09:24",
    },
    {
      id: "node2",
      temperature: 13.65,
      humidity: 45.98,
      date: "2024-12-10",
      time: "03:03",
    },
    {
      id: "node2",
      temperature: 24.3,
      humidity: 26.85,
      date: "2024-12-06",
      time: "19:24",
    },
    {
      id: "node2",
      temperature: 7.37,
      humidity: 57.96,
      date: "2024-12-07",
      time: "09:53",
    },
    {
      id: "node2",
      temperature: 9.34,
      humidity: 63.44,
      date: "2024-12-01",
      time: "19:07",
    },
    {
      id: "node2",
      temperature: 38.13,
      humidity: 44.13,
      date: "2024-12-06",
      time: "14:53",
    },
    {
      id: "node2",
      temperature: 24.89,
      humidity: 48.97,
      date: "2024-12-09",
      time: "00:27",
    },
    {
      id: "node2",
      temperature: 4.36,
      humidity: 54.01,
      date: "2024-12-07",
      time: "18:50",
    },
    {
      id: "node2",
      temperature: 10.06,
      humidity: 28.44,
      date: "2024-12-07",
      time: "11:49",
    },
    {
      id: "node2",
      temperature: 8.59,
      humidity: 52.75,
      date: "2024-12-01",
      time: "05:21",
    },
    {
      id: "node2",
      temperature: 11.2,
      humidity: 35.04,
      date: "2024-12-01",
      time: "06:57",
    },
    {
      id: "node2",
      temperature: 6.84,
      humidity: 66.57,
      date: "2024-12-09",
      time: "00:05",
    },
    {
      id: "node2",
      temperature: 0.27,
      humidity: 36.76,
      date: "2024-12-02",
      time: "19:23",
    },
    {
      id: "node2",
      temperature: 17.4,
      humidity: 66.62,
      date: "2024-12-06",
      time: "22:32",
    },
    {
      id: "node2",
      temperature: 23.11,
      humidity: 39.8,
      date: "2024-12-04",
      time: "05:47",
    },
    {
      id: "node2",
      temperature: 5.88,
      humidity: 30.52,
      date: "2024-12-03",
      time: "17:13",
    },
    {
      id: "node2",
      temperature: 25.72,
      humidity: 69.75,
      date: "2024-12-11",
      time: "14:15",
    },
    {
      id: "node2",
      temperature: 25.07,
      humidity: 2.58,
      date: "2024-12-03",
      time: "10:33",
    },
    {
      id: "node2",
      temperature: 19.56,
      humidity: 40.16,
      date: "2024-12-01",
      time: "03:55",
    },
    {
      id: "node2",
      temperature: 26.51,
      humidity: 66.37,
      date: "2024-12-05",
      time: "06:14",
    },
    {
      id: "node2",
      temperature: 16.47,
      humidity: 84.17,
      date: "2024-12-08",
      time: "00:03",
    },
    {
      id: "node2",
      temperature: 37.78,
      humidity: 83.39,
      date: "2024-12-03",
      time: "22:49",
    },
    {
      id: "node2",
      temperature: 36.26,
      humidity: 62.45,
      date: "2024-12-03",
      time: "09:29",
    },
    {
      id: "node2",
      temperature: 18.48,
      humidity: 59.74,
      date: "2024-12-08",
      time: "13:28",
    },
    {
      id: "node2",
      temperature: 6.39,
      humidity: 90.27,
      date: "2024-12-07",
      time: "22:40",
    },
    {
      id: "node2",
      temperature: 37.99,
      humidity: 57.81,
      date: "2024-12-07",
      time: "12:48",
    },
    {
      id: "node2",
      temperature: 11.81,
      humidity: 48.04,
      date: "2024-12-11",
      time: "07:19",
    },
    {
      id: "node2",
      temperature: 1.05,
      humidity: 35.01,
      date: "2024-12-08",
      time: "03:06",
    },
    {
      id: "node2",
      temperature: 14.62,
      humidity: 38.3,
      date: "2024-12-08",
      time: "09:14",
    },
    {
      id: "node2",
      temperature: 25.83,
      humidity: 92.58,
      date: "2024-12-10",
      time: "18:09",
    },
    {
      id: "node2",
      temperature: 9.32,
      humidity: 57.24,
      date: "2024-12-02",
      time: "16:37",
    },
    {
      id: "node2",
      temperature: 0.88,
      humidity: 14.73,
      date: "2024-12-07",
      time: "12:02",
    },
    {
      id: "node2",
      temperature: 35.24,
      humidity: 54.91,
      date: "2024-12-06",
      time: "16:51",
    },
  ],
};

// Middleware để xử lý JSON
app.use(express.json());
app.use(cors());

// Route cơ bản
app.get("/", (req, res) => {
  res.send("Chào mừng đến với API của tôi!");
});

// Route trả về thông tin
app.get("/data_sensor", (req, res) => {
  res.json({
    data,
  });
});

// Route xử lý POST
app.post("/api/data", (req, res) => {
  const { name, age } = req.body;
  res.json({
    message: `Dữ liệu đã nhận: ${name}, ${age}`,
  });
});

// Khởi động server
const PORT = 3001;
app.listen(PORT, () => {
  console.log(`Server đang chạy tại http://localhost:${PORT}`);
});
